<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>GoTrust Pay – DEMO FONCTIONNEL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
header{background:#0a2540;color:#fff;padding:15px;text-align:center}
.card{background:#fff;border-radius:10px;padding:15px;margin:15px;box-shadow:0 4px 10px rgba(0,0,0,.1)}
button{background:#00c389;color:#fff;border:none;padding:12px;border-radius:6px;font-weight:bold;width:100%;cursor:pointer;margin-top:6px}
button.danger{background:#e74c3c}
input,select{width:100%;padding:10px;margin:6px 0}
.hidden{display:none}
.badge{background:#00c389;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px}
nav button{margin:4px}
</style>
</head>

<body>

<header>
<h2>GoTrust Pay</h2>
<p>Plateforme financière – MODE DEMO</p>
</header>

<!-- ACCUEIL -->
<section id="home" class="card">
<h3>Bienvenue</h3>
<p>Accédez à votre espace financier.</p>
<button onclick="openLogin()">Connexion</button>
</section>

<!-- LOGIN (NE BLOQUE PLUS) -->
<section id="login" class="card hidden">
<h3>Connexion</h3>

<select id="role">
<option value="client">Client</option>
<option value="agent">Agent</option>
<option value="admin">Administrateur</option>
</select>

<input id="name" placeholder="Nom ou Identifiant">
<input id="password" type="password" placeholder="Mot de passe (6 chiffres min)">

<button onclick="login()">Entrer dans l’interface</button>

<p style="font-size:12px;color:#555">
Admin : GOPAY / admin243<br>
Clients & Agents : accès libre (6 chiffres min)
</p>
</section>

<!-- CLIENT / AGENT -->
<section id="user" class="hidden">
<nav>
<button onclick="view('dash')">Dashboard</button>
<button onclick="view('deposit')">Dépôt</button>
<button onclick="view('send')">Envoi</button>
<button onclick="view('withdraw')">Retrait</button>
<button class="danger" onclick="logout()">Déconnexion</button>
</nav>

<div id="dash" class="card"></div>

<div id="deposit" class="card hidden">
<h4>Dépôt</h4>
<input id="depAmt" type="number" placeholder="Montant">
<select id="depService">
<option>Orange</option>
<option>Airtel</option>
<option>Vodacom</option>
<option>GoPay</option>
</select>
<button onclick="deposit()">Valider</button>
</div>

<div id="send" class="card hidden">
<h4>Envoi</h4>
<input id="sendTo" placeholder="ID ou Numéro">
<input id="sendAmt" type="number" placeholder="Montant">
<select id="sendService">
<option>Orange</option>
<option>Airtel</option>
<option>Vodacom</option>
<option>GoPay</option>
</select>
<button onclick="send()">Confirmer</button>
</div>

<div id="withdraw" class="card hidden">
<h4>Retrait</h4>
<input id="withAmt" type="number" placeholder="Montant">
<select id="withService">
<option>Orange</option>
<option>Airtel</option>
<option>Vodacom</option>
<option>GoPay</option>
</select>
<input placeholder="Code retrait (6 chiffres)">
<button onclick="withdraw()">Demander</button>
</div>
</section>

<!-- ADMIN -->
<section id="admin" class="hidden">
<div class="card">
<h3>Espace Administrateur</h3>
<span class="badge">ADMIN CONNECTÉ</span>
</div>

<div class="card">
<h4>Activité récente (DEMO)</h4>
<div id="adminLog"></div>
</div>

<button class="danger" onclick="logout()">Déconnexion</button>
</section>

<script>
let current=null;
let logs=[];

function openLogin(){
 home.classList.add("hidden");
 login.classList.remove("hidden");
}

function login(){
 const r=role.value;
 const n=name.value.trim();
 const p=password.value.trim();

 if(!n || !p){alert("Champs obligatoires");return;}

 // ADMIN FIXE (SEUL CAS VÉRIFIÉ)
 if(r==="admin"){
   if(n==="GOPAY" && p==="admin243"){
     login.classList.add("hidden");
     admin.classList.remove("hidden");
     adminLog.innerHTML="Connexion admin réussie";
     return;
   }else{
     alert("Identifiants admin incorrects");
     return;
   }
 }

 // CLIENT / AGENT → ACCÈS TOUJOURS AUTORISÉ
 if(!/^\d{6,}$/.test(p)){
   alert("Mot de passe : 6 chiffres minimum");
   return;
 }

 current={
   name:n,
   role:r,
   balance:0,
   history:[]
 };

 login.classList.add("hidden");
 user.classList.remove("hidden");
 renderDash();
}

function renderDash(){
 dash.innerHTML=`
 <h3>${current.name}</h3>
 <p>Rôle : ${current.role}</p>
 <p>Solde : <b>${current.balance} FC</b></p>
 <span class="badge">ACTIF</span>
 <hr>
 ${current.history.length?current.history.join("<br>"):"Aucune activité"}
 `;
}

function view(v){
 ["dash","deposit","send","withdraw"].forEach(x=>document.getElementById(x).classList.add("hidden"));
 document.getElementById(v).classList.remove("hidden");
}

/* VALIDATIONS SIMULÉES */
function deposit(){
 let a=+depAmt.value;
 let s=depService.value;
 if(a<=0)return;
 current.balance+=a;
 current.history.push(`Dépôt ${s} +${a}`);
 logs.push(`Dépôt ${a} via ${s}`);
 renderDash();
}

function send(){
 let a=+sendAmt.value;
 if(a<=0 || a>current.balance)return;
 current.balance-=a;
 current.history.push(`Envoi -${a} (${sendService.value})`);
 logs.push(`Envoi ${a}`);
 renderDash();
}

function withdraw(){
 let a=+withAmt.value;
 if(a<=0 || a>current.balance)return;
 current.balance-=a;
 current.history.push(`Retrait -${a} (${withService.value})`);
 logs.push(`Retrait ${a}`);
 renderDash();
}

function logout(){location.reload();}
</script>

</body>
</html>
